{% extends 'base.html' %}

{% block body %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/login.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/graph.css') }}">
<!-- Bokeh code -->
<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-0.12.6.min.css" type="text/css" />        
<script type="text/javascript" src="https://cdn.pydata.org/bokeh/release/bokeh-0.12.6.min.js"></script>
<script type="text/javascript">
    Bokeh.set_log_level("info");
</script>

<style>

</style>

<header>
  <h1>Graph Page</h1>
  <h3>Visually See the Data</h3>
  <p>Red Dot = Went to Trump, Blue Dot = Went to Clinton</p>
</header>

<!-- Code for the area on which graph to see -->
<section id='optionSection'>
  <h5>To see a graph, please select one from the menu below</h5>
  <select id="select_path">
    <option value="trumpVoters_meadianHousehold">Trump Voters Vs Median Household Income</option>
    <option value="trumpVoters_metroArea">Trump Voters Vs Percentage Living in Metro Area</option>
    <option value="whitePoverty_hateCrimes">White Poverty Vs Hate Crimes</option>
    <option value="blackPoverty_hateCrimes">Black Poverty Vs Hate Crimes</option>
    <option value="giniIndex_hateCrimes">Gini Index Vs Hate Crimes</option>
  </select>
  <button class='initial_btn' onclick='selectGraph(); return false;'>Push To Change Graph</button>
</section>

<!-- Code for graph areas -->
<main>  

  <div id='graphOne'>
    <div class="bk-root">
      <div class="bk-plotdiv" id="16f76b21-f3d6-4083-8663-1421b65e4339">
      </div>
    </div>
  </div>
  <h6 id='graphOneSub' class='center'>Correlation between both columns: {{ corr_0 }}</h6>

  <hr>

  <div id='graphTwo'>
    <div class="bk-root">
        <div class="bk-plotdiv" id="ffd182a2-14e4-4e28-9019-9dee84ee5447">
        </div>
    </div>
  </div>
  <h6 id='graphTwoSub' class='center'>Correlation between both columns: {{ corr_1 }}</h6>

  <hr>

  <div id='graphThree'>
    <div class="bk-root">
      <div class="bk-plotdiv" id="32d95d3a-4065-4e29-964b-364ec46cc2c3"></div>
    </div>
  </div>
  <h6 id='graphThreeSub' class='center'>Correlation between both columns: {{ corr_2 }}</h6>

  <hr>

  <div id='graphFour'>
    <div class="bk-root">
      <div class="bk-plotdiv" id="9adf2f36-5d2c-44ec-91c1-3bf370048301"></div>
    </div>
  </div>
  <h6 id='graphFourSub' class='center'>Correlation between both columns: {{ corr_3 }}</h6>

  <hr>

  <div id='graphFive'>
    <div class="bk-root">
      <div class="bk-plotdiv" id="1ced75fa-dd94-42c3-a4b7-7a41d5801916"></div>
    </div>
  </div>
  <h6 id='graphFiveSub' class='center'>Correlation between both columns: {{ corr_4 }}</h6>

  <hr>

  <section id='historgram_area'>
    <h1 class='center'>Histogram Graphs</h1>

    <div>
      <select id="select_histogram">
        <option value="median">Median Income Histogram</option>
        <option value="seasonal">Unemployed Season Workers Histogram</option>
      </select>
      <div id='buttonAlign'>
        <button class='initial_btn' onclick='changeHistogram(); return false;'>Push To Change Graph</button>
      </div>
    </div>

    <div id='histogram_graph_div'>
      <img id='histogram_graph' src="../static/graphs/median_income.png">
      <p class='center'>Data</p>
    </div>

  </section>

</main>


<hr>   

<script src='{{ url_for('static', filename='js/graph.js') }}'></script>
<script src='{{ url_for('static', filename='js/graph_two.js') }}'></script>
<script type="text/javascript">
//The code below will change the graph on the graph page when the user selects a 
//specific graph to look at. I'm not 100% sure why, but when this code is moved into a 
//seperate JS file, the graphs do not appear. 
  
  //This function will clear out the previous graphs on the page. Thus, when a user selects 
  //a new graph to look at, this function will clear out the old one. 
  let reset = () => {
    document.getElementById("graphOne").style.display = "none";
    document.getElementById("graphOneSub").style.display = "none";
    document.getElementById("graphTwo").style.display = "none";
    document.getElementById("graphTwoSub").style.display = "none";
    document.getElementById("graphThree").style.display = "none";
    document.getElementById("graphThreeSub").style.display = "none";
    document.getElementById("graphFour").style.display = "none";
    document.getElementById("graphFourSub").style.display = "none";
    document.getElementById("graphFive").style.display = "none";
    document.getElementById("graphFiveSub").style.display = "none";
  };

  //This function will fire when the user hits the button on the select menu. 
  let selectGraph = () => {

    //I get the value for what the user selected. 
    let selected = document.getElementById('select_path').value;

    //Calling the reset function from above
    reset();

    //This conditional statement will unhide the graph based on what the user selected 
    //from the selected statement. I also all the marginTop style because the graphs where 
    //moving further and further down the page. 
    if (selected == "trumpVoters_meadianHousehold") {
      document.getElementById("graphOne").style.display = "block";
      document.getElementById("graphOneSub").style.display = "block";
      document.getElementById("graphOne").style.marginTop = "15px";
    } else if (selected == "trumpVoters_metroArea") {
      document.getElementById("graphTwo").style.display = "block";
      document.getElementById("graphTwoSub").style.display = "block";
      document.getElementById("graphTwo").style.marginTop = "-15px";
    } else if (selected == "whitePoverty_hateCrimes") {
      document.getElementById("graphThree").style.display = "block";
      document.getElementById("graphThreeSub").style.display = "block";
      document.getElementById("graphThree").style.marginTop = "-45px";
    } else if (selected == "blackPoverty_hateCrimes") {
      document.getElementById("graphFour").style.display = "block";
      document.getElementById("graphFourSub").style.display = "block";
      document.getElementById("graphFour").style.marginTop = "-75px";
    } else if (selected == "giniIndex_hateCrimes") {
      document.getElementById("graphFive").style.display = "block";
      document.getElementById("graphFiveSub").style.display = "block";
      document.getElementById("graphFive").style.marginTop = "-105px";
    }

  }

</script>

{% endblock %}